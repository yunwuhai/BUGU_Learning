## 做个Arduino

### 什么是Arduino

注意，Arduino不是一块单片机，也不是一类单片机，而是一个开源硬件平台的总称。

不过我这里说的做个Arduino，暂时是指做一个Arduino UNO开发板，是一种Arduino官方的开发板。

Atmega328P单片机，Arduino的MCU

总的一套价格加下来一般也在二十多元左右，如果在淘宝上直接搜Arduino UNO

在我们现在可以买到的单片机中，做一个Arduino UNO是性价比最高的方案。

今天教的东西属于技术层面，而不仅仅是做个Arduino，而是通过这种技术可以学会制作任何功能的开发板。

#### 什么是单片机

单片机（Single-Chip Microcomputer）是一种[集成电路芯片](https://baike.baidu.com/item/集成电路芯片/4872662)，是采用超大规模集成电路技术把具有数据处理能力的[中央处理器](https://baike.baidu.com/item/中央处理器/284033)CPU、随机存储器[RAM](https://baike.baidu.com/item/RAM/144481)、[只读存储器](https://baike.baidu.com/item/只读存储器/2399075)ROM、多种I/O口和中断系统、定时器/计数器等功能（可能还包括显示驱动电路、脉宽调制电路、模拟多路转换器、[A/D转换器](https://baike.baidu.com/item/A%2FD转换器/4883848)等电路）集成到一块硅片上构成的一个小而完善的微型计算机系统，在工业控制领域广泛应用。

#### 什么是开发板

开发板在使用的时候一般是用在开发的时候。

#### Arduino UNO

这块板子的根本定义应该是一块Atmega328P单片机的开发板。

#### 最小系统板

除了你绝对无法控制的引脚，其它功能都可以完善实现的开发板。

电源系统、时钟系统、*复位系统*、程序烧录系统

Arduino UNO的官方版本是一个非常接近于最小系统板的开发板。

## 开始设计

### 我们该怎么设计电路板

如果我们是需要设计开发一个别人已经开源的开发板，那么我们应该去找到它的原理图和PCB图、Gerber文件就可以去直接生产了。

Altium Designer一般来说简称AD，这个软件专门做EDA设计，AD软件是商业软件，它是收费的。

一般还是建议使用免费的软件，目前我用过的免费的EDA软件，并且效果还可以比较推荐的有立创EDA，另一个是KiCAD

建议如果没有什么挑战想法或者不是技术大牛，目前还是建议使用立创EDA。

#### 立创EDA

免费、平台的特点外，最大的优点，拥有非常丰富的元件库和一个开源平台。

### 设计流程

#### 自己用

先设计大概方案，

atmega328p_au：去看，芯片手册

ch340

电阻、电容、晶振、排母、排针若干

USB口

DC充电口

按键

Atmel（爱特梅尔）生产的，不过他好像被收购了，收购的厂家好像是MicroChip（微芯），一般来说，我们就直接去微芯找数据手册（datasheet）

Arduino UNO/Nano

Atmega328p_PU

Atmega328p_AU

DAPLink这个仿真器是没法用到Atmega328p的芯片上的，它需要用单独的烧录器

然后去网上找方案中需要用的芯片以及元件，一般来说找没有问题的当中最便宜的。

#### 关于USB

USB常见版本有TypeA-C，表示了它的形状，但是不代表它的版本，Micro、Mini

DAPLink，串口和USB是两种不同的通信协议，

串口转USB，就是把串口的包解析出来，然帮把里面的数据提取出来

0101011

USB报头USB描述符（告诉这是一个模拟串口设备）10101USB报尾

CPU和外部接口就会发现有一个模拟串口设备通过USB接进来了，然后你可以通过串口调试助手去接收和显示这段信息。

Windows或者Linux，操作系统提供了接口函数，我们可以使用编程语言调用这些接口函数以及它的句柄这些，来实现串口通信。

